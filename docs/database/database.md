# Базы данных (PostgresQ)

## БД индексы

Советы:

- Если пишешь индекс по нескольким колонкам, то их очередность зависит от их селективности - самая первая: наиболее селективная (отражается на памяти занимаймым индексом). Но по хорошему надо смотреть на запросы

- Если есть много null - делай индекс с not null

- Если есть foreign key - лучше повесить на него индекс

- Плохо параллелить запросы в БД в OLTP, тк ты забираешь "ядро" которое могло также обрабатывать другой запрос

- Смотри статистику по индексу

Полезные команды:

1. Проверка статисктики с помощью pg_stat

```
SELECT * FROM pg_stat WHERE tablename = '<table_name>' and attname = '<column_name>'
```

2. Создание index'а

```
CREATE INDEX <index_name> ON <table_name>
(optinal) WHERE <column_name> ...;
```

3. Посмотреть статисктику выполения запроса:

```
EXPLAIN ANALYZE <запрос>
```

4. Посмотреть на индексы:

```
\d <table_name>
```